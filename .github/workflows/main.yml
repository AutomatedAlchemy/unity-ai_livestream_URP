name: Unity Project Build and Execution

on: [push]

jobs:
  build-and-run:
    runs-on: self-hosted

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2
      
    - name: Cache Unity Library
      uses: actions/cache@v2
      with:
        path: Library
        key: Library-${{ hashFiles('**/ProjectSettings/ProjectVersion.txt') }}
        restore-keys: Library-

    - name: Build Unity Project
      uses: game-ci/unity-builder@v2
      with:
        unityVersion: '2020.3.10f1' # Your Unity version
        targetPlatform: StandaloneWindows64 # Your build target
      env:
        UNITY_LICENSE: ${{ secrets.UNITY_LICENSE }} # Or UNITY_SERIAL for professional licenses


   # - name: Execute Built Game
    #  run: |
        # Replace with the path to your built game executable
        # The following command assumes a Linux environment and that you've built a Linux executable
     #   chmod +x ./Build/GameExecutableName
      #  nohup ./Build/GameExecutableName -fullScreen &
